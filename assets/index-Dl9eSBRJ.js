var fe=Object.defineProperty,de=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var U=(n,l,s)=>l in n?fe(n,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[l]=s,y=(n,l)=>{for(var s in l||(l={}))me.call(l,s)&&U(n,s,l[s]);if(J)for(var s of J(l))he.call(l,s)&&U(n,s,l[s]);return n},_=(n,l)=>de(n,ge(l));var Z=(n,l,s)=>new Promise((i,c)=>{var u=a=>{try{r(s.next(a))}catch(p){c(p)}},e=a=>{try{r(s.throw(a))}catch(p){c(p)}},r=a=>a.done?i(a.value):Promise.resolve(a.value).then(u,e);r((s=s.apply(n,l)).next())});import{f as x,k as q,q as j,aF as we,av as ye,d as K,S as ke,am as ee,ay as De,aR as te,ap as Be}from"./entry/index-C2yXXbfE-1713597257644.js";import{d as z,c as h,a9 as ve,Z as d,_ as b,F as $e,ae as g,a7 as O,a8 as w,G as I,a0 as F,ac as R,ab as P,a1 as D,u as o,ag as oe,$ as Q,k as E,f as k,g as H,w as W,ad as X,y as se,n as Ce,m as be,aa as Pe,aj as Oe,ak as Te,r as ae,J as S,h as Se}from"./vue-bWmcvXqU.js";import{a_ as Fe,an as Re,ad as He,e as ne,a as Le}from"./antd-D-XvgdAE.js";const{t:Y}=x(),re={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:Y("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:Y("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},Ne=y({isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},open:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean}},re),_e=z({name:"BasicDrawerFooter",__name:"DrawerFooter",props:_(y({},re),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(n,{emit:l}){const s=n,i=l,{prefixCls:c}=q("basic-drawer-footer"),u=h(()=>{const a=`${s.height}`;return{height:a,lineHeight:`calc(${a} - 1px)`}});function e(){i("ok")}function r(){i("close")}return(a,p)=>{const m=ve("a-button");return a.showFooter||a.$slots.footer?(d(),b("div",{key:0,class:D(o(c)),style:oe(u.value)},[a.$slots.footer?g(a.$slots,"footer",{key:1}):(d(),b($e,{key:0},[g(a.$slots,"insertFooter"),a.showCancelBtn?(d(),O(m,R({key:0},a.cancelButtonProps,{onClick:r,class:"mr-2"}),{default:w(()=>[I(F(a.cancelText),1)]),_:1},16)):P("",!0),g(a.$slots,"centerFooter"),a.showOkBtn?(d(),O(m,R({key:1,type:a.okType,onClick:e},a.okButtonProps,{class:"mr-2",loading:a.confirmLoading}),{default:w(()=>[I(F(a.okText),1)]),_:1},16,["type","loading"])):P("",!0),g(a.$slots,"appendFooter")],64))],6)):P("",!0)}}}),je={key:1},Ie=z({name:"BasicDrawerHeader",__name:"DrawerHeader",props:{isDetail:j.bool,showDetailBack:j.bool,title:j.string},emits:["close"],setup(n,{emit:l}){const s=l,{prefixCls:i}=q("basic-drawer-header");function c(){s("close")}return(u,e)=>n.isDetail?(d(),b("div",{key:1,class:D([o(i),`${o(i)}--detail`])},[Q("span",{class:D(`${o(i)}__twrap`)},[n.showDetailBack?(d(),b("span",{key:0,onClick:c},[E(o(Fe),{class:D(`${o(i)}__back`)},null,8,["class"])])):P("",!0),n.title?(d(),b("span",je,F(n.title),1)):P("",!0)],2),Q("span",{class:D(`${o(i)}__toolbar`)},[g(u.$slots,"titleToolbar")],2)],2)):(d(),O(o(we),{key:0,class:D(o(i))},{default:w(()=>[g(u.$slots,"title"),I(" "+F(u.$slots.title?"":n.title),1)]),_:3},8,["class"]))}}),Ee=z({inheritAttrs:!1,__name:"BasicDrawer",props:Ne,emits:["open-change","ok","close","register"],setup(n,{emit:l}){const s=n,i=l,c=k(!1),u=ye(),e=k({}),{t:r}=x(),{prefixVar:a,prefixCls:p}=q("basic-drawer"),m={setDrawerProps:ue,emitOpen:void 0},T=H();T&&i("register",m,T.uid);const A=h(()=>K(s,o(e))),v=h(()=>{const t=_(y(y({placement:"right"},o(u)),o(A)),{open:o(c)});t.title=void 0;const{isDetail:f,width:$,wrapClassName:C,getContainer:N}=t;if(f){$||(t.width="100%");const G=`${p}__detail`;t.rootClassName=C?`${C} ${G}`:G,N||(t.getContainer=`.${a}-layout-content`)}return t}),le=h(()=>y(y({},u),o(v))),M=h(()=>{const{footerHeight:t,showFooter:f}=o(v);return f&&t?Re(t)?`${t}px`:`${t.replace("px","")}px`:"0px"}),ie=h(()=>({position:"relative",height:`calc(100% - ${o(M)})`})),ce=h(()=>{var t;return!!((t=o(v))!=null&&t.loading)});W(()=>s.open,(t,f)=>{t!==f&&(c.value=t)},{deep:!0}),W(()=>c.value,t=>{se(()=>{i("open-change",t),T&&m.emitOpen&&m.emitOpen(t,T.uid)})});function L(t){return Z(this,null,function*(){const{closeFunc:f}=o(v);if(i("close",t),f&&ne(f)){const $=yield f();c.value=!$;return}c.value=!1})}function ue(t){e.value=K(o(e),t),Reflect.has(t,"open")&&(c.value=!!t.open)}function pe(){i("ok")}return(t,f)=>{const $=Ce("loading");return d(),O(o(He),R(le.value,{class:o(p),onClose:L}),X({default:w(()=>[be((d(),O(o(ke),{style:oe(ie.value),"loading-tip":t.loadingText||o(r)("common.loadingText")},{default:w(()=>[g(t.$slots,"default")]),_:3},8,["style","loading-tip"])),[[$,ce.value]]),E(_e,R(v.value,{onClose:L,onOk:pe,height:M.value}),X({_:2},[Pe(Object.keys(t.$slots),C=>({name:C,fn:w(N=>[g(t.$slots,C,Oe(Te(N||{})))])}))]),1040,["height"])]),_:2},[t.$slots.title?{name:"title",fn:w(()=>[g(t.$slots,"title")]),key:"1"}:{name:"title",fn:w(()=>[E(Ie,{title:A.value.title,isDetail:t.isDetail,showDetailBack:t.showDetailBack,onClose:L},{titleToolbar:w(()=>[g(t.$slots,"titleToolbar")]),_:3},8,["title","isDetail","showDetailBack"])]),key:"0"}]),1040,["class"])}}}),B=ae({}),V=ae({});function Me(){if(!H())throw new Error("useDrawer() can only be used inside setup() or functional components!");const n=k(null),l=k(!1),s=k(0);function i(e,r){ee(()=>{n.value=null,l.value=null,B[o(s)]=null}),!(o(l)&&De()&&e===o(n))&&(s.value=r,n.value=e,l.value=!0,e.emitOpen=(a,p)=>{V[p]=a})}const c=()=>{const e=o(n);return e||te("useDrawer instance is undefined!"),e},u={setDrawerProps:e=>{var r;(r=c())==null||r.setDrawerProps(e)},getOpen:h(()=>V[~~o(s)]),openDrawer:(e=!0,r,a=!0)=>{var m;if((m=c())==null||m.setDrawerProps({open:e}),!r)return;if(a){B[o(s)]=null,B[o(s)]=S(r);return}Le(S(B[o(s)]),S(r))||(B[o(s)]=S(r))},closeDrawer:()=>{var e;(e=c())==null||e.setDrawerProps({open:!1})}};return[i,u]}const Ge=n=>{const l=k(null),s=H(),i=k(0);if(!H())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const c=()=>{const e=o(l);if(!e){te("useDrawerInner instance is undefined!");return}return e},u=(e,r)=>{ee(()=>{l.value=null}),i.value=r,l.value=e,s==null||s.emit("register",e,r)};return Se(()=>{const e=B[o(i)];e&&(!n||!ne(n)||se(()=>{n(e)}))}),[u,{changeLoading:(e=!0)=>{var r;(r=c())==null||r.setDrawerProps({loading:e})},changeOkLoading:(e=!0)=>{var r;(r=c())==null||r.setDrawerProps({confirmLoading:e})},getOpen:h(()=>V[~~o(i)]),closeDrawer:()=>{var e;(e=c())==null||e.setDrawerProps({open:!1})},setDrawerProps:e=>{var r;(r=c())==null||r.setDrawerProps(e)}}]},Je=Be(Ee);export{Je as B,Ge as a,Me as u};
