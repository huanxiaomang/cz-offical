import{q as L,k as R,c as z}from"./entry/index-C2yXXbfE-1713597257644.js";import{a as C}from"./useContentViewHeight-ByP0kkZI.js";import{G as E}from"./antd-D-XvgdAE.js";import{d as W,f as o,c as $,u as a,o as B,b as M,Z as F,_ as N,k as V,a8 as b,ag as p,a1 as g,$ as q}from"./vue-bWmcvXqU.js";import{u as D}from"./useWindowSizeFn-rAoW7C_Y.js";const G=["src"],I=W({__name:"index",props:{frameSrc:L.string.def("")},emits:["message"],setup(h,{expose:_,emit:v}){const w=v,s=o(!0),x=o(50),r=o(window.innerHeight),n=o(),{headerHeightRef:y}=C(),{prefixCls:c}=R("iframe-page");D(l,{wait:150,immediate:!0});const m=$(()=>({height:`${a(r)}px`}));function l(){const e=a(n);if(!e)return;const t=y.value;x.value=t,r.value=window.innerHeight-t;const i=document.documentElement.clientHeight-t;e.style.height=`${i}px`}function H(){s.value=!1,l()}const d=e=>{w("message",e.data)},S=(e,t,i)=>{var u;const f=a(n);f&&((u=f.contentWindow)==null||u.postMessage(e,t,i))},k=()=>{var t;s.value=!0;const e=n.value;e&&((t=e.contentWindow)==null||t.location.reload(),s.value=!1)};return B(()=>{window.addEventListener("message",d)}),M(()=>{window.removeEventListener("message",d)}),_({postMessage:S,reload:k}),(e,t)=>(F(),N("div",{class:g(a(c)),style:p(m.value)},[V(a(E),{spinning:s.value,size:"large",style:p(m.value)},{default:b(()=>[q("iframe",{src:h.frameSrc,class:g(`${a(c)}__main`),ref_key:"frameRef",ref:n,onLoad:H},null,42,G)]),_:1},8,["spinning","style"])],6))}}),A=z(I,[["__scopeId","data-v-96050dda"]]);export{A as default};
