var M=(g,d,n)=>new Promise((_,c)=>{var p=e=>{try{f(n.next(e))}catch(r){c(r)}},v=e=>{try{f(n.throw(e))}catch(r){c(r)}},f=e=>e.done?_(e.value):Promise.resolve(e.value).then(p,v);f((n=n.apply(g,d)).next())});import{P as N}from"./index-DmvVZzf-.js";import{a as U,_ as k,s as A}from"./entry/index-C2yXXbfE-1713597257644.js";import{_ as B,s as y}from"./CZAvatar.vue_vue_type_script_setup_true_lang-DEznI1S4.js";import{g as x}from"./getUsernameClass-C8lIHKPN.js";import{R as i,U as L,Q as O,V as b}from"./antd-D-XvgdAE.js";import{d as R,f as m,c as E,o as $,Z as h,a7 as w,a8 as a,$ as o,G as u,k as t,u as s,_ as S,aa as V,a1 as Z,a0 as I,F as D}from"./vue-bWmcvXqU.js";import"./useContentViewHeight-ByP0kkZI.js";import"./useWindowSizeFn-rAoW7C_Y.js";import"./onMountedOrActivated-C5rGMWQz.js";const z=o("div",{class:"mb-3"}," 支持查看成员信息、修改成员权限。 ",-1),F={class:"flex items-center justify-between md:flex-row flex-col gap-5"},G={class:"flex items-center"},P=["onClick"],T={class:"md:inline hidden"},Q=o("span",null," Common ",-1),le=R({__name:"index",setup(g){let d=m([]);const n=m({}),_=m({}),c=m("ALL");let p=E(()=>c.value==="ALL"?d.value:d.value.filter(e=>e.role===c.value));function v(){_.value=d.value.reduce((e,{userId:r,role:l})=>(e[r]=x(l),e),{})}$(()=>M(this,null,function*(){d.value=yield U(),n.value=d.value.reduce((e,{userId:r,role:l})=>(e[r]=l,e),{}),v()}));const f=e=>M(this,null,function*(){const r=yield A(e,n.value[e]);_.value[e]=x(r.role)});return(e,r)=>(h(),w(s(N),{title:"成员管理"},{headerContent:a(()=>[o("div",null,[z,u(" 筛选成员: "),t(s(L),{value:c.value,"onUpdate:value":r[0]||(r[0]=l=>c.value=l),class:"ml-3 w-35"},{default:a(()=>[t(s(i),{value:"ALL"},{default:a(()=>[u("所有成员")]),_:1}),t(s(i),{value:"ADMIN"},{default:a(()=>[u("创智管理员")]),_:1}),t(s(i),{value:"CZ_MEMBER"},{default:a(()=>[u("创智成员")]),_:1}),t(s(i),{value:"COMMON"},{default:a(()=>[u("普通用户")]),_:1})]),_:1},8,["value"])])]),default:a(()=>[(h(!0),S(D,null,V(s(p),l=>(h(),w(s(O),{key:l.userId,class:"mb-6"},{default:a(()=>[o("div",F,[o("span",G,[t(B,{userId:l.userId},null,8,["userId"]),o("span",{class:Z(["ml-6 text-lg cursor-pointer",_.value[l.userId]]),onClick:C=>s(y)(l)},I(l.username),11,P)]),o("span",T,I(l.createdAt.replace("T"," ").replace("Z","")),1),t(s(L),{value:n.value[l.userId],"onUpdate:value":C=>n.value[l.userId]=C,class:"w-35",onChange:C=>f(Number(l.userId))},{default:a(()=>[t(s(b),null,{label:a(()=>[o("span",null,[t(k,{icon:"tdesign:member",size:"12"}),u(" Member ")])]),default:a(()=>[t(s(i),{value:"ADMIN"},{default:a(()=>[u("创智管理员")]),_:1}),t(s(i),{value:"CZ_MEMBER"},{default:a(()=>[u("创智成员")]),_:1})]),_:1}),t(s(b),null,{label:a(()=>[Q]),default:a(()=>[t(s(i),{value:"COMMON"},{default:a(()=>[u("普通用户")]),_:1})]),_:1})]),_:2},1032,["value","onUpdate:value","onChange"])])]),_:2},1024))),128))]),_:1}))}});export{le as default};
