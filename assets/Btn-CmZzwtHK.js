var g=(C,d,n)=>new Promise((y,u)=>{var m=a=>{try{i(n.next(a))}catch(s){u(s)}},f=a=>{try{i(n.throw(a))}catch(s){u(s)}},i=a=>a.done?y(a.value):Promise.resolve(a.value).then(m,f);i((n=n.apply(C,d)).next())});import{_ as b}from"./CurrentPermissionMode.vue_vue_type_script_setup_true_lang-B4GCMUX6.js";import{aB as S,J as h,m as A,aj as w,br as D,c as N}from"./entry/index-C2yXXbfE-1713597257644.js";import{A as v}from"./index-CtCW_-2d.js";import{P as T}from"./index-DmvVZzf-.js";import{d as V,c as $,a9 as M,n as j,Z as c,a7 as l,a8 as e,k as t,$ as B,G as o,a0 as E,u as r,_ as F,F as I,ab as _,m as x}from"./vue-bWmcvXqU.js";import{af as p,az as U}from"./antd-D-XvgdAE.js";import"./useContentViewHeight-ByP0kkZI.js";import"./useWindowSizeFn-rAoW7C_Y.js";import"./onMountedOrActivated-C5rGMWQz.js";const z=V({__name:"Btn",setup(C){const{hasPermission:d}=S(),n=h(),y=A(),u=w(),m=$(()=>y.getProjectConfig.permissionMode===D.BACK);function f(i){return g(this,null,function*(){const a="fakeToken"+i;u.setToken(a),u.getUserInfoAction(),n.changePermissionCode()})}return(i,a)=>{const s=M("a-button"),k=j("auth");return c(),l(r(T),{contentBackground:"",title:"按钮权限控制",contentClass:"p-4"},{default:e(()=>[t(b),B("p",null,[o(" 当前拥有的code列表: "),B("a",null,E(r(n).getPermCodeList),1)]),t(r(p)),t(r(U),{class:"mt-4",type:"info",message:"点击后请查看按钮变化(必须处于后台权限模式才可测试此页面所展示的功能)","show-icon":""}),t(r(p)),t(s,{type:"primary",class:"mr-2",onClick:a[0]||(a[0]=P=>f(2)),disabled:!m.value},{default:e(()=>[o(" 点击切换按钮权限(用户id为2) ")]),_:1},8,["disabled"]),t(s,{type:"primary",onClick:a[1]||(a[1]=P=>f(1)),disabled:!m.value},{default:e(()=>[o(" 点击切换按钮权限(用户id为1,默认) ")]),_:1},8,["disabled"]),m.value?(c(),F(I,{key:0},[t(r(p),null,{default:e(()=>[o("组件方式判断权限")]),_:1}),t(r(v),{value:"1000"},{default:e(()=>[t(s,{type:"primary",class:"mx-4"},{default:e(()=>[o(" 拥有code ['1000']权限可见 ")]),_:1})]),_:1}),t(r(v),{value:"2000"},{default:e(()=>[t(s,{color:"success",class:"mx-4"},{default:e(()=>[o(" 拥有code ['2000']权限可见 ")]),_:1})]),_:1}),t(r(v),{value:["1000","2000"]},{default:e(()=>[t(s,{color:"error",class:"mx-4"},{default:e(()=>[o(" 拥有code ['1000','2000']角色权限可见 ")]),_:1})]),_:1}),t(r(p),null,{default:e(()=>[o("函数方式方式判断权限")]),_:1}),r(d)("1000")?(c(),l(s,{key:0,type:"primary",class:"mx-4"},{default:e(()=>[o(" 拥有code ['1000']权限可见 ")]),_:1})):_("",!0),r(d)("2000")?(c(),l(s,{key:1,color:"success",class:"mx-4"},{default:e(()=>[o(" 拥有code ['2000']权限可见 ")]),_:1})):_("",!0),r(d)(["1000","2000"])?(c(),l(s,{key:2,color:"error",class:"mx-4"},{default:e(()=>[o(" 拥有code ['1000','2000']角色权限可见 ")]),_:1})):_("",!0),t(r(p),null,{default:e(()=>[o("指令方式方式判断权限(该方式不能动态修改权限.)")]),_:1}),x((c(),l(s,{type:"primary",class:"mx-4"},{default:e(()=>[o(" 拥有code ['1000']权限可见 ")]),_:1})),[[k,"1000"]]),x((c(),l(s,{color:"success",class:"mx-4"},{default:e(()=>[o(" 拥有code ['2000']权限可见 ")]),_:1})),[[k,"2000"]]),x((c(),l(s,{color:"error",class:"mx-4"},{default:e(()=>[o(" 拥有code ['1000','2000']角色权限可见 ")]),_:1})),[[k,["1000","2000"]]])],64)):_("",!0)]),_:1})}}}),R=N(z,[["__scopeId","data-v-5c4f6cac"]]);export{R as default};
